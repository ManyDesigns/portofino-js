import{c as n}from"./app.d5853e38.js";import{_ as a}from"./plugin-vue_export-helper.21dcd24c.js";const s={},e=n(`<h1 id="lista-delle-entita" tabindex="-1"><a class="header-anchor" href="#lista-delle-entita" aria-hidden="true">#</a> Lista delle entit\xE0</h1><p>Il metodo per ottenere l&#39;elenco delle entit\xE0 \xE8 paginato di default e se non vengono specificate opzioni di default ritorna la prima pagina.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getKittens</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> kittenAction <span class="token operator">=</span> <span class="token keyword">await</span> Portofino<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token string">&#39;kitten&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">await</span> kittenAction<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="paginazione" tabindex="-1"><a class="header-anchor" href="#paginazione" aria-hidden="true">#</a> Paginazione</h2><p>\xC8 possibile sfruttare la paginazione di Portofino grazie a tre parametri che possiamo passare nell\u2019oggetto di configurazione della chiamata search.</p><ul><li><code>pagination</code> (boolean) il valore di default \xE8 true, se impostato a false non passa il parametro maxResult a Portofino, di conseguenza disabilita la paginazione</li><li><code>page</code> (number) il valore di default \xE8 0, serve per indicare la pagina che vogliamo ottenere</li><li><code>pageSize</code> (number) il valore di default \xE8 10, indica il numero di elementi ritornati per ogni pagina</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getKittens</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> kittenAction <span class="token operator">=</span> <span class="token keyword">await</span> Portofino<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token string">&#39;kitten&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">await</span> kittenAction<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    page<span class="token operator">:</span> pagination<span class="token punctuation">.</span>current<span class="token punctuation">,</span>
    pageSize<span class="token operator">:</span> pagination<span class="token punctuation">.</span>pageSize<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>Per disattivare la paginazione assicurati che nel <code>configuration.xml</code> non sia presente l&#39;opzione <code>rowsPerPage</code></p></div><h2 id="ordinamento" tabindex="-1"><a class="header-anchor" href="#ordinamento" aria-hidden="true">#</a> Ordinamento</h2><p>Il parametro <code>sort</code> ci consente di impostare il parametro e la direzione di ordinamento delle entit\xE0 ritornate dalla search, il parametro deve contenere un oggetto con due attributi:</p><ul><li><strong>property</strong>: Una stringa rappresentante il nome della propriet\xE0 che vogliamo ordinare.</li><li><strong>direction</strong>: Una stringa che pu\xF2 assumere i valori <code>asc</code> per ordinare in maniera ascendente e <code>desc</code> per ordinare in maniera discendente.</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getKittens</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> kittenAction <span class="token operator">=</span> <span class="token keyword">await</span> Portofino<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span>\u2018kitten\u2019<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">await</span> kittenAction<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      sort<span class="token operator">:</span> <span class="token punctuation">{</span>
        property<span class="token operator">:</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span>
        direction<span class="token operator">:</span> <span class="token string">&#39;asc&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="filtro" tabindex="-1"><a class="header-anchor" href="#filtro" aria-hidden="true">#</a> Filtro</h2><p>Infine possiamo filtrare il nostro elenco di entit\xE0 grazie al parametro <code>filters</code>. Questo parametro si aspetta una mappa dove la chiave \xE8 il nome del parametro che vogliamo filtrare e il valore pu\xF2 essere una stringa, se vogliamo trovare i valori uguali a quello inserito oppure un oggetto se vogliamo dei filtri pi\xF9 avanzati.</p><h3 id="stringhe" tabindex="-1"><a class="header-anchor" href="#stringhe" aria-hidden="true">#</a> Stringhe</h3><p>\xC8 possibile filtrare le stringhe anche per occorrenza passando un oggetto che indica la modalit\xE0 di ricerca e il valore da ricercare. Le opzioni disponibili per la modalit\xE0 di ricerca sono: <code>equals</code>, <code>starts</code> e <code>ends</code>. Se il campo non viene indicato o \xE8 nullo allora sar\xE0 applicato un filtro di tipo <code>contains</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> filters <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token punctuation">{</span>
    mode<span class="token operator">:</span> <span class="token string">&#39;starts&#39;</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token string">&#39;Mario&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="lista-di-valori" tabindex="-1"><a class="header-anchor" href="#lista-di-valori" aria-hidden="true">#</a> Lista di valori</h3><p>Se passiamo una lista, Portofino ritorner\xE0 il valore della propriet\xE0 della nostra entit\xE0 \xE8 inclusa nella lista, allora viene accettata.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> filters <span class="token operator">=</span> <span class="token punctuation">{</span>
  roles<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;administrator&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="min-max" tabindex="-1"><a class="header-anchor" href="#min-max" aria-hidden="true">#</a> min &amp; max</h3><p>Se passiamo un oggetto con attributi <code>min</code> e <code>max</code> allora verranno restituite solo le entit\xE0 il cui attributo rientra in quell\u2019intervallo di valori. \xC8 possibile utilizzare anche solo uno dei due parametri.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> filters <span class="token operator">=</span> <span class="token punctuation">{</span>
  created_at<span class="token operator">:</span> <span class="token punctuation">{</span>
    min<span class="token operator">:</span> <span class="token string">&#39;2021-12-20&#39;</span><span class="token punctuation">,</span>
    max<span class="token operator">:</span> &#39;<span class="token number">2021</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">22</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="esempio" tabindex="-1"><a class="header-anchor" href="#esempio" aria-hidden="true">#</a> Esempio</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> endOfMonth<span class="token punctuation">,</span> startOfMonth<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;date-fns&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getOfficeAccesses</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token keyword">await</span> Portofino<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token string">&#39;accesses&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  action<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    pagination<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    filters<span class="token operator">:</span> <span class="token punctuation">{</span>
      user_id<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$auth<span class="token punctuation">.</span>user<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      access_date<span class="token operator">:</span> <span class="token punctuation">{</span>
        min<span class="token operator">:</span> <span class="token function">startOfMonth</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">,</span>
        max<span class="token operator">:</span> <span class="token function">endOfMonth</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div>`,25);function t(p,o){return e}var l=a(s,[["render",t]]);export{l as default};
